<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MVP Page - Home</title>
    <!-- Connecting Tailwind CSS via CDN (recommended for fast MVP) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Setting the Inter font and smooth transitions for better UX */
        
    </style>
</head>
<body>

    <!-- 1. HEADER (NAVIGATION BAR) - Deep VIOLET background -->
    <header class="bg-violet-900 shadow-xl">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                
                <!-- Logo/MVP Title -->
                <div class="flex-shrink-0">
                    <a href="index.html" class="text-2xl font-bold text-white tracking-wider">
                        <!-- Signature violet accent -->
                        <span class="text-violet-400">MVP</span>-App
                    </a>
                </div>
                
                <!-- Navigation links (3 pages) -->
                <nav class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <!-- Active item: dark violet background -->
                        <a href="index.html" class="nav-link text-white font-medium bg-violet-700">Home</a>
                        <!-- Inactive items: light violet text -->
                        <a href="product.html" class="nav-link text-violet-300 hover:text-white">Product</a>
                        <a href="about.html" class="nav-link text-violet-300 hover:text-white">Contacts</a>
                    </div>
                </nav>
                
                <!-- Mobile Menu (Button Placeholder) -->
                <div class="md:hidden">
                    <!-- Mobile menu button in violet color -->
                    <button class="bg-violet-700 text-white p-2 rounded-md hover:bg-violet-600 transition">
                        <!-- Hamburger menu icon -->
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>

            </div>
        </div>
    </header>

    <!-- 2. MAIN CONTENT (PLACE FOR HERO, FEATURES, ETC. SECTIONS) -->
    <main class="flex flex-col lg:flex-row max-w-screen-xl mx-auto p-4 gap-6 w-full h-[calc(100vh-2rem)]">
        
        <!-- LEFT PART: Instructions, Code and Controls -->
        <div class="lg:w-1/2 flex flex-col space-y-4 h-full">
            
            <h1 class="text-3xl font-extrabold text-violet-400 mb-2">Flex-Blocks üê∏</h1>
            <p class="text-gray-400">
                Level <span id="current-level" class="font-bold text-violet-300">1</span> of 25.
            </p>

            <!-- Instructions area -->
            <div id="instructions" class="bg-gray-800 p-4 rounded-lg shadow-inner border border-violet-800">
                <h2 class="text-xl font-semibold mb-2 text-white">Task</h2>
                <p id="goal-text" class="text-gray-300 mb-4"></p>
                <h3 class="text-md font-medium text-violet-400 mb-2">Starting CSS:</h3>
                <pre id="starter-css-container" class="text-violet-300"></pre>
            </div>

            <!-- Code Editor -->
            <div class="flex-grow flex flex-col">
                <label for="css-input" class="text-md font-medium mb-2 text-violet-300">Your CSS for #game-container:</label>
                <textarea id="css-input" placeholder="Enter property and value, for example: justify-content: flex-end;"></textarea>
            </div>
            
            <!-- Control Buttons -->
            <div class="flex space-x-4 pt-4">
                <button id="check-btn" onclick="checkAnswer()" class="flex-1 px-6 py-3 bg-violet-600 text-white font-bold rounded-lg shadow-lg hover:bg-violet-700 transition duration-150 transform hover:scale-[1.01]">
                    Check!
                </button>
                <button id="next-btn" onclick="nextLevel()" class="px-6 py-3 bg-green-600 text-white font-bold rounded-lg shadow-lg hover:bg-green-700 transition duration-150 transform hover:scale-[1.01] hidden">
                    Next Level &rarr;
                </button>
            </div>
        </div>

        <!-- RIGHT PART: Game Board -->
        <div class="lg:w-1/2 h-full flex flex-col">
            <h2 class="text-xl font-semibold text-white mb-2">Result</h2>
            <!-- Game Board -->
            <div id="game-board-container" class="flex-grow min-h-[300px] lg:min-h-full">
                <!-- Content added by JavaScript -->
            </div>
            
            <!-- Success/Error Message -->
            <div id="message-box" class="mt-4 p-3 rounded-lg text-center font-medium hidden" role="alert"></div>

        </div>

    </main>

    <script>
        const gameContainer = document.getElementById('game-board-container');
        const cssInput = document.getElementById('css-input');
        const goalText = document.getElementById('goal-text');
        const currentLevelSpan = document.getElementById('current-level');
        const checkBtn = document.getElementById('check-btn');
        const nextBtn = document.getElementById('next-btn');
        const messageBox = document.getElementById('message-box');
        const starterCssContainer = document.getElementById('starter-css-container');

        let currentLevel = 1;

        // Defining unique icons/emojis for blocks (replacing "images")
        const ITEM_ICONS = {
            1: 'üê∏', // Frog
            2: '‚≠ê', // Star
            3: 'üçé', // Apple
            4: 'üíé', // Diamond
            5: 'üçÑ'  // Mushroom
        };

        // Function to create HTML block with icon
        function createItemHTML(id) {
            const icon = ITEM_ICONS[id] || '‚ùì';
            return `<div class="item item-${id}">${icon}</div>`;
        }


        // Defining 25 game levels
        const levels = [
            // Level 1: justify-content: flex-end
            {
                id: 1,
                goal: "Use `justify-content` with the value `flex-end` to move the blocks to the end of the container's axis (to the right).",
                starterCSS: "#game-container { display: flex; }",
                solution: "justify-content: flex-end;",
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3)
            },
            // Level 2: justify-content: center
            {
                id: 2,
                goal: "Move the blocks to the center of the container horizontally using `justify-content`.",
                starterCSS: "#game-container { display: flex; }",
                solution: "justify-content: center;",
                boardHTML: createItemHTML(1) + createItemHTML(2)
            },
            // Level 3: justify-content: space-around
            {
                id: 3,
                goal: "Align the blocks so that space is distributed evenly around each element using `justify-content`.",
                starterCSS: "#game-container { display: flex; }",
                solution: "justify-content: space-around;",
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3) + createItemHTML(4)
            },
            // Level 4: align-items: flex-end
            {
                id: 4,
                goal: "Use `align-items` with the value `flex-end` to move the blocks to the bottom of the container.",
                starterCSS: "#game-container { display: flex; height: 100%; }",
                solution: "align-items: flex-end;",
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3)
            },
            // Level 5: align-items: center
            {
                id: 5,
                goal: "Center the blocks vertically (cross-axis) using `align-items`.",
                starterCSS: "#game-container { display: flex; height: 100%; }",
                solution: "align-items: center;",
                boardHTML: createItemHTML(1) + createItemHTML(2)
            },
            // Level 6: flex-direction: column
            {
                id: 6,
                goal: "Change the direction of the main axis to vertical using `flex-direction` with the value `column-reverse`. Blocks üê∏ and ‚≠ê should swap places.",
                starterCSS: "#game-container { display: flex; height: 100%; }",
                solution: "flex-direction: column-reverse;",
                boardHTML: createItemHTML(1) + createItemHTML(2)
            },
            // Level 7: flex-direction: row-reverse + justify-content
            {
                id: 7,
                goal: "Reverse the order of blocks using `flex-direction: row-reverse;`, and align them to the center using `justify-content`.",
                starterCSS: "#game-container { display: flex; }",
                solution: "flex-direction: row-reverse; justify-content: center;",
                boardHTML: createItemHTML(1) + createItemHTML(2)
            },
            // Level 8: justify-content + align-items (full centering)
            {
                id: 8,
                goal: "Use `justify-content` and `align-items` to **completely center** the üçÑ block in the container.",
                starterCSS: "#game-container { display: flex; height: 100%; }",
                solution: "justify-content: center; align-items: center;",
                boardHTML: createItemHTML(5)
            },
            // Level 9: align-self
            {
                id: 9,
                goal: "Use `align-self: flex-end;` on the üê∏ block (`.item-1`) and `align-self: flex-start;` on the ‚≠ê block (`.item-2`)",
                starterCSS: `#game-container { display: flex; height: 100%; align-items: center; }`,
                solution: ".item-1 { align-self: flex-end; } .item-2 { align-self: flex-start; }",
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3)
            },
            // Level 10: flex-wrap
            {
                id: 10,
                goal: "Use `flex-wrap: wrap;` so that blocks wrap to a new line (container has limited width).",
                starterCSS: "#game-container { display: flex; width: 300px; }",
                solution: "flex-wrap: wrap;",
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3) + createItemHTML(4) + createItemHTML(5)
            },
            // Level 11: Combine: row-reverse + space-between.
            { 
                id: 11, 
                goal: "Combine: `row-reverse` + `space-between`.", 
                starterCSS: "#game-container { display: flex; }", 
                solution: "flex-direction: row-reverse; justify-content: space-between;", 
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3)
            },
            // Level 12: flex-flow
            { 
                id: 12, 
                goal: "Use the `flex-flow` shorthand property to set the direction to `column` and alignment to `center` (on the main axis).", 
                starterCSS: "#game-container { display: flex; height: 100%; }", 
                solution: "flex-flow: column center;", 
                boardHTML: createItemHTML(1) + createItemHTML(2)
            },
            // Level 13: order
            { 
                id: 13, 
                goal: "Move the üçé block (`.item-3`) to the first position using `order`.", 
                starterCSS: "#game-container { display: flex; }", 
                solution: ".item-3 { order: -1; }", 
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3)
            },
            // Level 14: align-content
            { 
                id: 14, 
                goal: "Align the lines using `align-content: space-around;` (container is wrapped).", 
                starterCSS: "#game-container { display: flex; flex-wrap: wrap; height: 100%; width: 200px; }", 
                solution: "align-content: space-around;", 
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3) + createItemHTML(4) + createItemHTML(5)
            },
            // Level 15: flex-grow
            { 
                id: 15, 
                goal: "Use `flex-grow: 1` on the üê∏ block (`.item-1`) so that it occupies all available space.", 
                starterCSS: "#game-container { display: flex; }", 
                solution: ".item-1 { flex-grow: 1; }", 
                boardHTML: createItemHTML(1) + createItemHTML(2)
            },
            // Level 16: flex-grow + flex-shrink
            { 
                id: 16, 
                goal: "Ensure that the üê∏ block (`.item-1`) occupies twice as much space as the ‚≠ê block (`.item-2`), using `flex-grow` (2 and 1).", 
                starterCSS: "#game-container { display: flex; }", 
                solution: ".item-1 { flex-grow: 2; } .item-2 { flex-grow: 1; }", 
                boardHTML: createItemHTML(1) + createItemHTML(2)
            },
            // Level 17: justify-content + align-content (full centering with wrap)
            { 
                id: 17, 
                goal: "Use `justify-content` and `align-content` to center the blocks on both axes (requires `flex-wrap: wrap`).", 
                starterCSS: "#game-container { display: flex; flex-wrap: wrap; height: 100%; }", 
                solution: "justify-content: center; align-content: center;", 
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3)
            },
            // Level 18: order (complex)
            { 
                id: 18, 
                goal: "Use `order` to change the positions of üê∏, ‚≠ê, üçé to üçé, üê∏, ‚≠ê.", 
                starterCSS: "#game-container { display: flex; }", 
                solution: ".item-1 { order: 2; } .item-2 { order: 3; } .item-3 { order: 1; }", 
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3)
            },
            // Level 19: align-content (flex-end)
            { 
                id: 19, 
                goal: "Wrap the blocks and align them to the end (bottom) using `align-content: flex-end;`.", 
                starterCSS: "#game-container { display: flex; flex-wrap: wrap; height: 100%; width: 250px; }", 
                solution: "align-content: flex-end;", 
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3) + createItemHTML(4)
            },
            // Level 20: align-items: baseline
            { 
                id: 20, 
                goal: "Align the blocks along the baseline axis (`align-items: baseline;`).", 
                starterCSS: "#game-container { display: flex; height: 100%; }", 
                solution: "align-items: baseline;", 
                boardHTML: `<div class="item item-1" style="font-size: 2rem;">${ITEM_ICONS[1]}</div>` + createItemHTML(2) 
            },
            // Level 21: flex-basis
            { 
                id: 21, 
                goal: "Use `flex-basis: 150px;` on the üê∏ block (`.item-1`) to set its initial size.", 
                starterCSS: "#game-container { display: flex; }", 
                solution: ".item-1 { flex-basis: 150px; }", 
                boardHTML: createItemHTML(1) + createItemHTML(2)
            },
            // Level 22: stretch
            { 
                id: 22, 
                goal: "Make the blocks as wide and tall as possible using `flex-grow` and `align-items: stretch` (enter both properties).", 
                starterCSS: "#game-container { display: flex; height: 100%; align-items: stretch; }", 
                solution: ".item { flex-grow: 1; }", 
                boardHTML: createItemHTML(1) + createItemHTML(2)
            },
            // Level 23: column + space-between
            { 
                id: 23, 
                goal: "Combine `flex-direction: column` and `justify-content: space-between`.", 
                starterCSS: "#game-container { display: flex; height: 100%; }", 
                solution: "flex-direction: column; justify-content: space-between;", 
                boardHTML: createItemHTML(1) + createItemHTML(2) + createItemHTML(3)
            },
            // Level 24: row-reverse + align-items: center
            { 
                id: 24, 
                goal: "Combine `row-reverse` and `align-items: center`.", 
                starterCSS: "#game-container { display: flex; height: 100%; }", 
                solution: "flex-direction: row-reverse; align-items: center;", 
                boardHTML: createItemHTML(1) + createItemHTML(2)
            },
            // Level 25: Final Task
            { 
                id: 25, 
                goal: "Final Task! Fully center the blocks (justify-content, align-items) and reverse their order (row-reverse).", 
                starterCSS: "#game-container { display: flex; height: 100%; }", 
                solution: "justify-content: center; align-items: center; flex-direction: row-reverse;", 
                boardHTML: createItemHTML(1) + createItemHTML(2)
            }
        ];

        /**
         * Utility to apply CSS properties to an element.
         * @param {HTMLElement} element - the element to which styles are applied.
         * @param {string} propertiesString - string of CSS properties (e.g., "color: red; font-size: 16px;").
         */
        function applyStyles(element, propertiesString) {
            propertiesString.split(';').forEach(prop => {
                const [key, value] = prop.split(':');
                if (key && value) {
                    // Convert kebab-case to camelCase for JavaScript style properties
                    const camelCaseKey = key.trim().replace(/-([a-z])/g, (g) => g[1].toUpperCase());
                    element.style[camelCaseKey] = value.trim();
                }
            });
        }
        
        // Function for clearing and applying CSS
        function applyUserCSS(cssCode) {
            // 1. Clearing ALL previous inline styles for the container and elements
            gameContainer.removeAttribute('style');
            const items = gameContainer.querySelectorAll('.item');
            items.forEach(item => item.removeAttribute('style'));

            const levelData = levels[currentLevel - 1];
            
            // 2. Applying STARTING CSS (this is our base)
            const starterRules = levelData.starterCSS.match(/(\.item-\d|\#game-container|\s*)\s*\{([^}]+)\}/g) || [];
            
            starterRules.forEach(rule => {
                const [selector, properties] = rule.split(/\{|\}/).filter(s => s.trim().length > 0);
                if (!selector || selector.includes('game-container')) {
                    applyStyles(gameContainer, properties);
                } else if (selector.startsWith(".item")) {
                    document.querySelectorAll(selector).forEach(item => applyStyles(item, properties));
                }
            });
            // Handling clean CSS for the container if there are no selectors
            if (starterRules.length === 0 && levelData.starterCSS.trim()) {
                applyStyles(gameContainer, levelData.starterCSS.replace(/[\#\{\}]/g, '').trim());
            }

            // 3. Applying USER CODE (for live update)
            const userRules = cssCode.match(/(\.item-\d|\s*)\s*\{([^}]+)\}/g) || [];
            let containerCode = cssCode;

            userRules.forEach(rule => {
                const [selector, properties] = rule.split(/\{|\}/).filter(s => s.trim().length > 0);
                
                if (selector.startsWith(".item")) {
                    document.querySelectorAll(selector).forEach(item => applyStyles(item, properties));
                }
                containerCode = containerCode.replace(rule, '');
            });

            containerCode = containerCode.replace(/[\#\{\}]/g, '').trim();
            if (containerCode) {
                applyStyles(gameContainer, containerCode);
            }
        }

        // Function for loading a level
        function loadLevel() {
            const levelData = levels[currentLevel - 1];

            // Updating the interface
            currentLevelSpan.textContent = currentLevel;
            goalText.textContent = levelData.goal;
            
            // Formatting for displaying Starting CSS
            let starterDisplay = levelData.starterCSS.trim();
            if (starterDisplay.startsWith('#game-container {') && starterDisplay.endsWith('}')) {
                starterDisplay = starterDisplay.replace('#game-container {', '/* For #game-board-container */\n')
                                                .replace('}', '');
            }
            starterCssContainer.textContent = starterDisplay;

            // Setting the content of the game board
            gameContainer.innerHTML = levelData.boardHTML;

            // Clearing the input field and message
            cssInput.value = '';
            messageBox.textContent = '';
            messageBox.classList.add('hidden');
            nextBtn.classList.add('hidden');
            checkBtn.classList.remove('hidden');

            // Applying initial CSS of the level
            applyUserCSS(""); 
        }

        // Function for checking the answer
        function checkAnswer() {
            const levelData = levels[currentLevel - 1];
            const userAnswer = cssInput.value.trim().toLowerCase().replace(/\s+/g, ' ');
            const normalizedSolution = levelData.solution.toLowerCase().replace(/\s+/g, ' ');

            // Check: does the answer contain the correct properties
            const isCorrect = normalizedSolution.split(';').every(solPart => {
                solPart = solPart.trim();
                if (!solPart) return true; 

                // Use a regular expression to check for the property's presence
                const regex = new RegExp(solPart.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'i');
                return regex.test(userAnswer);
            });
            
            applyUserCSS(cssInput.value);

            if (isCorrect) {
                messageBox.textContent = "Congratulations! Blocks moved correctly.";
                messageBox.className = 'mt-4 p-3 rounded-lg text-center font-medium bg-green-900 text-green-300';
                checkBtn.classList.add('hidden');
                
                if (currentLevel < levels.length) {
                    nextBtn.classList.remove('hidden');
                } else {
                    messageBox.textContent = "Congratulations! You have successfully completed all 25 Flexbox levels!";
                }

            } else {
                messageBox.textContent = "Try again. Make sure you used the correct property and value.";
                messageBox.className = 'mt-4 p-3 rounded-lg text-center font-medium bg-red-900 text-red-300';
            }
        }

        // Function to move to the next level
        function nextLevel() {
            if (currentLevel < levels.length) {
                currentLevel++;
                loadLevel();
            }
        }

        // Game Initialization
        function initGame() {
            loadLevel();

            // Automatic CSS application during input
            cssInput.addEventListener('input', () => {
                applyUserCSS(cssInput.value);
            });
        }

        document.addEventListener('DOMContentLoaded', initGame);

    </script>

    <!-- 3. FOOTER (BOTTOM COLON TITL) - Very deep VIOLET background -->
    <footer class="bg-violet-950 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-gray-400">
                
                <!-- Column 1: Quick links -->
                <div>
                    <!-- Changed header color to white -->
                    <h3 class="text-sm font-semibold text-white uppercase tracking-wider mb-3">Navigation</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-400 hover:text-violet-400 transition">Home</a></li>
                        <li><a href="product.html" class="text-gray-400 hover:text-violet-400 transition">Product</a></li>
                        <li><a href="about.html" class="text-gray-400 hover:text-violet-400 transition">Contacts</a></li>
                    </ul>
                </div>

                <!-- Column 2: Company -->
                <div>
                    <h3 class="text-sm font-semibold text-white uppercase tracking-wider mb-3">About Us</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-violet-400 transition">Team</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-violet-400 transition">Mission</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-violet-400 transition">Careers</a></li>
                    </ul>
                </div>

                <!-- Column 3: Legal Information -->
                <div>
                    <h3 class="text-sm font-semibold text-white uppercase tracking-wider mb-3">Legal</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-violet-400 transition">Privacy Policy</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-violet-400 transition">Terms of Use</a></li>
                    </ul>
                </div>
                
                <!-- Column 4: Contact Information -->
                <div class="col-span-2 md:col-span-1">
                    <h3 class="text-sm font-semibold text-white uppercase tracking-wider mb-3">Contact</h3>
                    <p class="text-gray-400">Email: support@mvp-app.com</p>
                    <p class="text-gray-400">Phone: +38 0XX XXX XX XX</p>
                </div>
            </div>
            
            <!-- Separator line and copyright -->
            <div class="mt-8 pt-8 border-t border-violet-800">
                <p class="text-center text-base text-gray-500">
                    &copy; 2025 MVP-App. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

</body>
</html>